<section class="reset-password-page">
  <!-- Hero Section -->
  <div class="hero-section">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h1 class="hero-title">Restablecer Contraseña</h1>
      <p class="hero-subtitle">Ingresa tu nueva contraseña</p>
    </div>
  </div>

  <!-- Formulario de Restablecimiento -->
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-lg-6 col-md-8">
        <div class="reset-password-card">
          <div class="reset-password-header">
            <div class="reset-password-icon-wrapper">
              <i class="bi bi-shield-lock-fill reset-password-icon"></i>
            </div>
            <h2 class="reset-password-title">Nueva Contraseña</h2>
            <p class="reset-password-subtitle">Ingresa tu nueva contraseña segura</p>
          </div>

          <!-- Mensaje de éxito -->
          <div *ngIf="success" class="alert alert-success alert-dismissible fade show" role="alert">
            <i class="bi bi-check-circle-fill me-2"></i>
            <strong>¡Éxito!</strong> Tu contraseña ha sido restablecida correctamente. Serás redirigido al inicio de sesión...
            <button type="button" class="btn-close" aria-label="Close"></button>
          </div>

          <!-- Mensaje de error -->
          <div *ngIf="error && !success" class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            {{ error }}
            <button type="button" class="btn-close" (click)="error = null" aria-label="Close"></button>
          </div>

          <!-- Formulario -->
          <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" *ngIf="!success && token">
            <!-- Nueva Contraseña -->
            <div class="form-group mb-4">
              <label for="newPassword" class="form-label">
                <i class="bi bi-lock-fill me-2"></i>Nueva Contraseña
              </label>
              <input
                type="password"
                id="newPassword"
                class="form-control"
                [class.is-invalid]="resetPasswordForm.get('newPassword')?.invalid && resetPasswordForm.get('newPassword')?.touched"
                formControlName="newPassword"
                placeholder="Ingresa tu nueva contraseña"
                [disabled]="isLoading"
               
              />
              <div class="invalid-feedback" *ngIf="resetPasswordForm.get('newPassword')?.invalid && resetPasswordForm.get('newPassword')?.touched">
                {{ getPasswordErrors() }}
              </div>
              <small class="form-text text-muted">
                La contraseña debe tener al menos 8 caracteres, incluyendo una mayúscula, una minúscula y un número.
              </small>
            </div>

            <!-- Confirmar Contraseña -->
            <div class="form-group mb-4">
              <label for="confirmPassword" class="form-label">
                <i class="bi bi-lock-fill me-2"></i>Confirmar Contraseña
              </label>
              <input
                type="password"
                id="confirmPassword"
                class="form-control"
                [class.is-invalid]="resetPasswordForm.get('confirmPassword')?.invalid && resetPasswordForm.get('confirmPassword')?.touched"
                formControlName="confirmPassword"
                placeholder="Confirma tu nueva contraseña"
                [disabled]="isLoading"
              />
              <div class="invalid-feedback" *ngIf="resetPasswordForm.get('confirmPassword')?.invalid && resetPasswordForm.get('confirmPassword')?.touched">
                {{ getConfirmPasswordErrors() }}
              </div>
            </div>

            <!-- Botón de Restablecer -->
            <div class="form-actions">
              <button type="submit" class="submit-btn" [disabled]="isLoading || resetPasswordForm.invalid">
                <i class="bi bi-check-circle-fill me-2"></i>
                <span *ngIf="!isLoading">Restablecer Contraseña</span>
                <span *ngIf="isLoading">
                  <i class="bi bi-hourglass-split"></i>
                  Procesando...
                </span>
                <i *ngIf="!isLoading" class="bi bi-arrow-right ms-2"></i>
              </button>
            </div>
          </form>

          <!-- Mensaje cuando no hay token -->
          <div *ngIf="!token && !success" class="no-token-message">
            <div class="alert alert-warning">
              <i class="bi bi-exclamation-triangle-fill me-2"></i>
              <strong>Token no válido</strong>
              <p class="mb-0 mt-2">El enlace de recuperación no es válido o ha expirado. Por favor, solicita un nuevo enlace.</p>
            </div>
            <div class="form-actions">
              <button type="button" class="btn btn-primary" (click)="requestNewLink()">
                <i class="bi bi-arrow-left me-2"></i>
                Volver al Inicio de Sesión
              </button>
            </div>
          </div>

          <!-- Enlace a Login -->
          <div class="reset-password-footer" *ngIf="!success">
            <p>¿Recordaste tu contraseña? <a href="javascript:void(0)" class="login-link" (click)="goToLogin(); $event.preventDefault()">Iniciar Sesión</a></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>




<div class="menu-item card h-100" [class.unavailable]="!available">
  <div class="card-img-top position-relative">
    <ng-container *ngIf="imageUrl; else noImage">
      <img [src]="imageUrl" [alt]="name" />
    </ng-container>

    <ng-template #noImage>
      <div class="image-placeholder">
        <i class="bi bi-image" style="font-size: 3rem; color: rgba(107, 29, 61, 0.5)"></i>
      </div>
    </ng-template>


    <button
      class="favorite-btn"
      (click)="onFavoriteClick($event)"
      [title]="isLoggedIn ? 'Agregar a favoritos' : 'Inicia sesiÃ³n para agregar favoritos'">
      <i class="bi"
         [class.bi-heart]="!(isFavorite$ | async)"
         [class.bi-heart-fill]="isFavorite$ | async"
         [class.favorite-active]="isFavorite$ | async"></i>
    </button>
  </div>

  <div class="card-body">
    <div class="d-flex justify-content-between align-items-start mb-2">
      <h5 class="card-title mb-0">{{ name }}</h5>
      <span class="badge bg-primary price-badge">{{ price | currency:'COP':'symbol':'1.0-0' }}</span>
    </div>
    <p class="card-text">{{ description }}</p>
    <div class="availability-badges">
      <span *ngIf="!available || stockStatus === 'out_of_stock'" class="badge bg-danger">
        <i class="bi bi-x-circle me-1"></i>
        No disponible
      </span>
      <span *ngIf="available && stockStatus === 'low_stock'" class="badge bg-warning text-dark">
        <i class="bi bi-exclamation-triangle me-1"></i>
        Stock bajo
      </span>
    </div>
  </div>
</div>
